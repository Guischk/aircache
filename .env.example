# ═══════════════════════════════════════════════════════════════════
# AIRTABLE CONFIGURATION
# ═══════════════════════════════════════════════════════════════════
AIRTABLE_PERSONAL_TOKEN=your_airtable_personal_token_here
AIRTABLE_BASE_ID=your_airtable_base_id_here

# ═══════════════════════════════════════════════════════════════════
# SERVER CONFIGURATION
# ═══════════════════════════════════════════════════════════════════
PORT=3000
# Generate a secure token: https://generate-random.org/api-token-generator
BEARER_TOKEN=your_api_bearer_token_here

# ═══════════════════════════════════════════════════════════════════
# SYNC MODE CONFIGURATION
# ═══════════════════════════════════════════════════════════════════
# Available modes:
#   polling - Regular full refresh at REFRESH_INTERVAL (default)
#   webhook - Real-time updates via Airtable webhooks + failsafe refresh
#   manual  - No automatic refresh, only via POST /api/refresh
SYNC_MODE=polling

# ─────────────────────────────────────────────────────────────────────
# MODE: polling
# ─────────────────────────────────────────────────────────────────────
# Interval between full refreshes (in seconds)
# Default: 86400 (24 hours)
REFRESH_INTERVAL=86400

# ─────────────────────────────────────────────────────────────────────
# MODE: webhook
# ─────────────────────────────────────────────────────────────────────
# Your public Aircache URL (REQUIRED for webhook mode)
# Example: https://airboost.yourcompany.com
WEBHOOK_PUBLIC_URL=

# Automatically create/configure webhook on startup (default: true)
WEBHOOK_AUTO_SETUP=true

# Failsafe full refresh interval (in seconds)
# Acts as a safety net in case webhooks are missed
# Default: 86400 (24 hours)
FAILSAFE_REFRESH_INTERVAL=86400

# Webhook security settings
WEBHOOK_RATE_LIMIT=30              # Min seconds between webhook processing
WEBHOOK_TIMESTAMP_WINDOW=300       # Max age of webhook timestamp (seconds)
WEBHOOK_IDEMPOTENCY_TTL=86400      # TTL for idempotency tracking (seconds)

# ═══════════════════════════════════════════════════════════════════
# STORAGE CONFIGURATION
# ═══════════════════════════════════════════════════════════════════
# SQLite Database Paths
SQLITE_V1_PATH=data/airboost-v1.sqlite
SQLITE_V2_PATH=data/airboost-v2.sqlite
SQLITE_METADATA_PATH=data/metadata.sqlite

# Attachment Storage
ENABLE_ATTACHMENT_DOWNLOAD=true
STORAGE_PATH=./data/attachments

# ═══════════════════════════════════════════════════════════════════
# OPTIONAL: API & LOGGING
# ═══════════════════════════════════════════════════════════════════
API_DEFAULT_LIMIT=200

# Log level: 0=silent, 1=fatal, 2=error, 3=warn, 4=log, 5=info, 6=debug
CONSOLA_LEVEL=3
# Colored output (true) or plain (false)
CONSOLA_FANCY=true
